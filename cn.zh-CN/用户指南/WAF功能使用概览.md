# WAF功能使用概览 {#concept_lpz_q5l_l2b .concept}

本文介绍在开通和使用阿里云Web应用防火墙（WAF）过程中遇到的常用操作和最佳实践，便于您快速了解WAF，熟悉配置方法。

## WAF使用流程 {#section_exg_kvj_wgb .section}

WAF是阿里云云盾提供的Web应用防火墙，帮助您监控网站上的HTTP/HTTPS访问请求，并通过自定义过滤规则和启用Web攻击防护等功能，帮助您部署网站访问控制。

参照以下步骤使用WAF ：

1.  [开通WAF](#)并将网站[接入WAF](#)，使网站的访问流量全部流转到WAF进行监控。
2.  完成接入后，[配置WAF防护功能](#)。WAF将按照配置的防护策略检测并过滤恶意访问请求，只放行合法请求到源站服务器。
3.  WAF正常工作后，随时[查看WAF安全报表](#)，了解业务和安全信息；或通过[设置](#)功能，查看WAF资源使用情况，调整告警配置等。
4.  应用[WAF最佳实践](#)，完善安全管理；联系[安全专家](#)，解决技术问题。

## 开通WAF {#activate .section}

支持使用包年包月的计费方式开通WAF。包年包月按月/年计费，由您选购适用的WAF套餐，生成账单后直接付费；您可在选购的时长内享用套餐内的防护服务。

开通WAF后，您将获得一个WAF实例（对应一个WAF IP）；您可以使用这个WAF实例接入防护最多10个域名，为其开启防护，这10个域名只能使用同一个一级域名。

**操作导航**

-   [WAF计费方式](../../../../../intl.zh-CN/产品定价/计费方式.md#)
-   [开通Web应用防火墙](../../../../../intl.zh-CN/产品定价/开通WAF/开通Web应用防火墙.md#)
-   [WAF续费与升级](../../../../../intl.zh-CN/产品定价/续费与升级.md#)
-   [关闭Web应用防火墙](intl.zh-CN/用户指南/设置/关闭WAF.md#)

**WAF实例规格**

-   [WAF版本功能说明](../../../../../intl.zh-CN/产品定价/开通WAF/WAF各版本功能说明.md#)

    WAF包年包年模式提供高级版、企业版、旗舰版三种订阅规格。您可以根据要防护网站的业务规模和实际防护需求，选择合适的规格。

-   [额外带宽](../../../../../intl.zh-CN/产品定价/开通WAF/额外带宽扩展说明.md#)

    通过包年包月方式选购WAF套餐时，我们需要了解您的正常业务流量，以便区分DDoS攻击等异常流量。每种WAF套餐支持不同的业务带宽，如果您的实际业务正常流量大于套餐内的带宽限制，您需要购买额外带宽。

-   [域名扩展包](../../../../../intl.zh-CN/产品定价/开通WAF/扩展域名包.md#)

    如果您希望防护具有不同一级域名的网站，您需要购买域名扩展包。

-   [独享IP包](../../../../../intl.zh-CN/产品定价/开通WAF/独享IP包.md#)

    如果您有很重要的域名需要单独防护，而非使用同一个WAF IP防护所有域名，您可以购买独享IP包。


## 接入WAF {#implement .section}

开通WAF后，您需要在WAF控制台创建网站配置来关联要防护的域名，并通过[域名解析（DNS）](https://en.wikipedia.org/wiki/Domain_Name_System)，将网站访问请求流转到WAF进行监控。

-   添加网站配置：网站配置描述了被防护网站的流量转发关系。您可以使用自动或手动的方式添加网站配置。在网站配置中，您需要指定要防护的网站域名和源站服务器地址等信息。完成网站配置后，WAF分配给这个域名一个专用的[CNAME地址](https://en.wikipedia.org/wiki/CNAME_record)。

    **说明：** 如果您的域名使用 [阿里云云解析DNS](https://www.alibabacloud.com/product/dns)进行域名解析，在添加网站配置时支持一键自动创建，完成WAF接入；否则，您需要手动创建网站配置并修改DNS解析。

-   修改DNS解析：只有当您在对应域名的解析记录中添加并应用WAF CNAME记录后，才可以正式将网站访问流量导向WAF实例进行监控。

网站接入WAF后，WAF帮助您过滤恶意请求，放行合法的访问请求至源站服务器。

**操作导航**

-   [网站配置](intl.zh-CN/用户指南/接入WAF/网站配置.md#)
-   [业务接入WAF配置](intl.zh-CN/用户指南/接入WAF/业务接入WAF配置.md#)

## 防护配置 {#configure .section}

WAF提供多种防护功能，您可以随时调整已接入网站的防护配置，按照实际需求过滤网站访问请求。

您可以自定义ACL访问控制规则，或直接使用封装好的常见Web防护功能。我们结和Web攻击特征，分析请求头和请求主体，编写了精准的过滤算法，并将这些复杂的过滤算法封装各类防护功能，方便您直接使用。

**说明：** WAF使用多层过滤的机制，即您在启用WAF并配置防护功能后，一个客户端请求在经过WAF时，实际上按顺序经过了多层过滤。默认的防护检测顺序为：**精准访问控制** \> **CC防护** \> **Web应用攻击防护**。

**操作导航**

-   [精准访问控制](intl.zh-CN/用户指南/防护配置/精准访问控制.md#)、[黑白名单配置](intl.zh-CN/用户指南/防护配置/IP黑白名单配置.md#)

    自定义访问规则，根据客户端IP、请求URL以及常见的请求头字段过滤访问请求。

-   [Web应用攻击防护](intl.zh-CN/用户指南/防护配置/Web应用攻击防护.md#)

    帮助您防护SQL注入、XSS跨站攻击等常见的Web攻击。

-   [CC安全模式](intl.zh-CN/用户指南/防护配置/CC安全防护.md#)、[自定义CC防护](intl.zh-CN/用户指南/防护配置/自定义CC防护.md#)

    帮助您防护针对页面请求的CC攻击。

-   [新智能防护引擎](intl.zh-CN/用户指南/防护配置/新智能防护引擎.md#)

    对请求做语义分析，检测经伪装或隐藏的恶意请求，帮助您防护通过攻击混淆、变种等方式发起的恶意攻击。

-   [恶意IP封禁](intl.zh-CN/用户指南/防护配置/恶意IP惩罚.md#)

    帮助您自动封禁在短时间内进行多次Web攻击的客户端IP。

-   [封禁地区](intl.zh-CN/用户指南/防护配置/封禁地区.md#)

    帮助您一键封禁来自指定国内省份或海外地区的IP的访问请求。

-   [数据风控](intl.zh-CN/用户指南/防护配置/数据风控.md#)

    帮助您对抗机器威胁，如垃圾注册、账号被盗、活动作弊、垃圾消息等欺诈行为。

-   [网页防篡改](intl.zh-CN/用户指南/防护配置/网站防篡改.md#)

    帮助您锁定需要保护的网站页面，被锁定的页面在收到请求时，返回已设置的缓存页面。

-   [防敏感信息泄露](intl.zh-CN/用户指南/防护配置/防敏感信息泄露.md#)

    帮助您过滤服务器返回内容（异常页面或关键字）中的敏感信息，如身份证号、银行卡号、电话号码和敏感词汇等。


## 安全报表 {#reporting .section}

WAF提供方便的数据可视化和统计功能，方便您查看网站业务信息和安全统计数据。

**操作导航**

-   [总览](intl.zh-CN/用户指南/防护统计/业务和安全总览.md#)

    查看图表化的业务访问数据以及安全防护统计信息。

-   [安全报表](intl.zh-CN/用户指南/防护统计/WAF安全报表.md#)

    查询被防护域名在30天内受到的攻击详情和风险预警信息。

-   [全量日志](intl.zh-CN/用户指南/防护统计/全量日志查询.md#)

    搜索网站日志并使用在线分析快速定位请求。

    **说明：** 只有在网站配置页面为域名开启**日志检索**后，WAF才会收集指定域名的访问日志。


## WAF设置 {#setting .section}

WAF提供实例层面的设置功能，帮助您了解和管理WAF实例资源。

**操作导航**

-   [产品信息](intl.zh-CN/用户指南/设置/查看产品信息.md#)

    查看WAF实例的资源详情、WAF的防护规则更新通知、功能更新通知和WAF回源IP段。

-   [告警设置](intl.zh-CN/用户指南/设置/配置WAF告警.md#)

    WAF通过短信或邮件的方式推送安全事件和系统告警，您可以设置告警触发方式、告警周期以及告警信息接收方式。

-   [自定义规则组](intl.zh-CN/用户指南/设置/自定义规则组.md#)

    查看WAF内置防护规则，自由组合规则生成有针对性的防护策略（即自定义规则组），并在相应防护功能中应用自定义策略。


## 最佳实践 {#practice .section}

通过WAF最佳实践，更好地应用和管理WAF。

**操作导航**

-   [获取访问者真实IP](../../../../../intl.zh-CN/最佳实践/获取访问者真实IP.md#)

    启用WAF后，源站服务器收到的所有请求都来自WAF实例，无法直接显示客户端IP。本实践指导您查看访问者真实IP。

-   [源站保护](../../../../../intl.zh-CN/最佳实践/源站保护.md#)

    启用WAF后，源站服务器IP对客户端是隐藏的。如果您的源站服务器IP已公开或不慎泄露，攻击者可能越过WAF，直接对您的源站发动攻击。配置源站保护可以有效防护这种情形。

-   [同时部署WAF和DDoS高防IP](intl.zh-CN/用户指南/接入WAF/同时部署WAF和DDoS高防.md#)

    如果您同时开通了阿里云[DDoS高防IP服务](https://www.alibabacloud.com/product/ddos-pro)和Web应用防火墙，您可以参照本实践进行配置。

-   [同时部署WAF和CDN](intl.zh-CN/用户指南/接入WAF/同时部署WAF和CDN.md#)

    如果您同时开通了阿里云[CDN服务](https://www.alibabacloud.com/product/cdn)和Web应用防火墙，您可以参照本实践进行配置。


## 有问题，找专家 {#expert .section}

在使用WAF过程中遇到问题时，将鼠标移动到[云盾Web应用防火墙控制台](https://yundun.console.aliyun.com/?p=waf)左侧导航栏**有问题，找专家？**图标上，您可以看到WAF技术支持钉钉群的二维码。

通过钉钉软件扫描该二维码，加入技术支持群，您可以直接向安全专家咨询关于WAF使用的任何技术问题或解决紧急问题。

**说明：** 请参考[钉钉官网](https://www.dingtalk.com/)，下载并安装钉钉聊天软件。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/15550/15511464807113_zh-CN.png)

