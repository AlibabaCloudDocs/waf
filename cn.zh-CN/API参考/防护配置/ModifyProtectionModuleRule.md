# ModifyProtectionModuleRule {#doc_api_waf-openapi_ModifyProtectionModuleRule .reference}

调用ModifyProtectionModuleRule接口修改一条防护规则。

 ******** 

## 调试 {#apiExplorer .section}

前往【[API Explorer](https://api.aliyun.com/#product=waf-openapi&api=ModifyProtectionModuleRule)】在线调试，API Explorer 提供在线调用 API、动态生成 SDK Example 代码和快速检索接口等能力，能显著降低使用云 API 的难度，强烈推荐使用。

## 请求参数 {#parameters .section}

|名称|类型|是否必选|示例值|描述|
|--|--|----|---|--|
|Action|String|是|ModifyProtectionModuleRule|要执行的操作。取值：**ModifyProtectionModuleRule**。

 |
|Defense|String|是|antifraud|要操作的防护功能。取值：

 -   **antifraud**：修改数据风控规则
-   **antifraud\_js**：修改数据风控JS规则
-   **geo\_block**：修改区域封禁规则

 |
|Domain|String|是|www.aliyun.com|要操作的域名名称。

 |
|Id|Long|是|111|要操作的规则ID。

 **说明：** 您可以调用[DescribeProtectionModuleRules](~~100398~~)接口查看所有规则ID。

 |
|InstanceId|String|是|waf\_elasticity-cn-0xldbqtm005|WAF实例ID。

 **说明：** 您可以调用[DescribePayInfo](~~86651~~)接口查看当前WAF实例ID。

 |
|Rule|String|是|\{\\"uri\\":\\"http://xx.aliyun.com/example/\\"\}|要修改的规则内容。按照Rule构造成Json后转换成字符串作为入参，根据要添加的规则类型不同，需要传入的参数不同。具体结构说明如下。

 -   修改数据风控规则（**Defense**为**antifraud**或**antifraud\_js**）时，传入以下参数：
    -   **uri**，String类型，必选，要防护的URI。
    -   **id**，Long类型，可选，要修改的规则ID。
    -   **time**，Long类型，可选，要修改的规则的配置时间。
    -   **version**，Long类型，可选，并发锁版本。
-   修改区域封禁规则（**Defense**为**geo\_block**）时，传入以下参数：
    -   **id**，Long类型，可选，要修改的规则ID。
    -   **time**，Long类型，可选，规则的配置时间。
    -   **version**，Long类型，可选，并发锁版本。
    -   **geo\_cn**，Struct类型，必选，要封禁的中国大陆地域（含港澳台）省份信息。具体结构描述如下。
        -   **is\_all**，Boolean类型，必选，是否封禁全部中国省份。若为true，则忽略**area**参数。
        -   **area**，JSON Array类型，可选，要封禁的中国省份列表。支持填写省份数字码，关于各省份对应的数字码，参见下文说明。
    -   **geo\_others**，Struct类型，必选，要封禁的非中国大陆地域国家信息。具体结构描述如下。
        -   **is\_all**，Boolean类型，必选，是否封禁全部国家。若为true，则忽略**area**参数。
        -   **area**，JSON Array类型，可选，要封禁的国家列表。支持填写国家短码，关于各国家对应的短码，参见下文说明。

 |
|LockVersion|Long|是|1|并发锁版本号。

 **说明：** 您可以调用[DescribeProtectionModuleRules](~~100398~~)接口查看该信息。

 |
|Region|String|否|cn|地域ID。取值：

 -   **cn**：中国大陆地区（默认）
-   **cn-hongkong**：海外地区

 |

**中国地域省份对应的数字码**

```

{
    "310000": "上海市",
    "530000": "云南省",
    "150000": "内蒙古自治区",
    "110000": "北京市",
    "TW_01": "台湾省",
    "220000": "吉林省",
    "510000": "四川省",
    "120000": "天津市",
    "640000": "宁夏回族自治区",
    "340000": "安徽省",
    "370000": "山东省",
    "140000": "山西省",
    "440000": "广东省",
    "450000": "广西壮族自治区",
    "650000": "新疆维吾尔自治区",
    "320000": "江苏省",
    "360000": "江西省",
    "130000": "河北省",
    "410000": "河南省",
    "330000": "浙江省",
    "460000": "海南省",
    "420000": "湖北省",
    "430000": "湖南省",
    "MO_01": "澳门特别行政区",
    "620000": "甘肃省",
    "350000": "福建省",
    "540000": "西藏自治区",
    "520000": "贵州省",
    "210000": "辽宁省",
    "500000": "重庆市",
    "610000": "陕西省",
    "630000": "青海省",
    "HK_01": "香港特别行政区",
    "230000": "黑龙江省"
}

```

 **非中国大陆地域国家对应的短码** 

```

{
  "A1": "匿名代理",
  "A2": "卫星传输",
  "O1": "其它国家",
  "AD": "安道尔",
  "AE": "阿拉伯联合酋长国",
  "AF": "阿富汗",
  "AG": "安提瓜和巴布达",
  "AI": "安圭拉",
  "AL": "阿尔巴尼亚",
  "AM": "亚美尼亚",
  "AO": "安哥拉",
  "AP": "亚太地区",
  "AQ": "南极洲",
  "AR": "阿根廷",
  "AS": "美属萨摩亚",
  "AT": "奥地利",
  "AU": "澳大利亚",
  "AW": "阿鲁巴",
  "AX": "奥兰群岛",
  "AZ": "阿塞拜疆",
  "BA": "波黑",
  "BB": "巴巴多斯",
  "BD": "孟加拉共和国",
  "BE": "比利时",
  "BF": "布基纳法索",
  "BG": "保加利亚",
  "BH": "巴林",
  "BI": "布隆迪共和国",
  "BJ": "贝宁",
  "BL": "圣巴泰勒米岛",
  "BM": "百慕大群岛",
  "BN": "文莱达鲁萨兰国",
  "BO": "玻利维亚",
  "BQ": "博内尔、圣尤斯蒂休斯和萨巴",
  "BR": "巴西",
  "BS": "巴哈马群岛",
  "BT": "不丹",
  "BV": "布韦岛",
  "BW": "博茨瓦纳",
  "BY": "白俄罗斯",
  "BZ": "伯利兹",
  "CA": "加拿大",
  "CC": "科科斯（基林）群岛",
  "CD": "刚果民主共和国",
  "CF": "中非共和国",
  "CG": "刚果",
  "CH": "瑞士",
  "CI": "科特迪瓦",
  "CK": "库克群岛",
  "CL": "智利",
  "CM": "喀麦隆",
  "CN": "中华人民共和国",
  "CO": "哥伦比亚",
  "CR": "哥斯达黎加",
  "CU": "古巴",
  "CV": "佛得角",
  "CW": "库拉索",
  "CX": "澳大利亚圣诞岛",
  "CY": "塞浦路斯",
  "CZ": "捷克共和国",
  "DE": "德国",
  "DJ": "吉布提",
  "DK": "丹麦",
  "DM": "多米尼克国",
  "DO": "多米尼加共和国",
  "DZ": "阿尔及利亚",
  "EC": "厄瓜多尔",
  "EE": "爱沙尼亚",
  "EG": "埃及",
  "EH": "西撒哈拉",
  "ER": "厄立特里亚",
  "ES": "西班牙",
  "ET": "埃塞俄比亚",
  "EU": "欧洲",
  "FI": "芬兰",
  "FJ": "斐济",
  "FK": "马尔维纳斯群岛",
  "FM": "密克罗尼西亚联邦",
  "FO": "法罗群岛",
  "FR": "法国",
  "GA": "加蓬",
  "GB": "英国",
  "GD": "格林纳达",
  "GE": "格鲁吉亚",
  "GF": "法属圭亚那",
  "GG": "根西岛",
  "GH": "加纳",
  "GI": "直布罗陀",
  "GL": "格陵兰岛",
  "GM": "冈比亚共和国",
  "GN": "几内亚",
  "GP": "瓜德罗普",
  "GQ": "赤道几内亚",
  "GR": "希腊",
  "GS": "南乔治亚岛和南桑威奇群岛",
  "GT": "危地马拉",
  "GU": "关岛",
  "GW": "几内亚比绍共和国",
  "GY": "圭亚那",
  "HM": "赫德岛和麦克唐纳群岛",
  "HN": "洪都拉斯",
  "HR": "克罗地亚",
  "HT": "海地",
  "HU": "匈牙利",
  "ID": "印度尼西亚",
  "IE": "爱尔兰",
  "IL": "以色列",
  "IM": "马恩岛",
  "IN": "印度",
  "IO": "英属印度洋领地",
  "IQ": "伊拉克共和国",
  "IR": "伊朗",
  "IS": "冰岛",
  "IT": "意大利",
  "JE": "泽西岛",
  "JM": "牙买加",
  "JO": "约旦",
  "JP": "日本",
  "KE": "肯尼亚",
  "KG": "吉尔吉斯斯坦",
  "KH": "柬埔寨",
  "KI": "基里巴斯",
  "KM": "科摩罗",
  "KN": "圣基茨和尼维斯联邦",
  "KP": "朝鲜",
  "KR": "韩国",
  "KW": "科威特",
  "KY": "开曼群岛",
  "KZ": "哈萨克斯坦",
  "LA": "老挝",
  "LB": "黎巴嫩",
  "LC": "圣卢西亚",
  "LI": "列支敦士登",
  "LK": "斯里兰卡",
  "LR": "利比里亚",
  "LS": "莱索托",
  "LT": "立陶宛",
  "LU": "卢森堡",
  "LV": "拉脱维亚",
  "LY": "利比亚",
  "MA": "摩洛哥",
  "MC": "摩纳哥",
  "MD": "摩尔多瓦",
  "ME": "黑山共和国",
  "MF": "圣马丁",
  "MG": "马达加斯加",
  "MH": "马绍尔群岛",
  "MK": "马其顿",
  "ML": "马里",
  "MM": "缅甸",
  "MN": "蒙古",
  "MP": "北马里亚纳群岛",
  "MQ": "马提尼克岛",
  "MR": "毛里塔尼亚",
  "MS": "蒙塞拉特岛",
  "MT": "马耳他",
  "MU": "毛里求斯",
  "MV": "马尔代夫",
  "MW": "马拉维",
  "MX": "墨西哥",
  "MY": "马来西亚",
  "MZ": "莫桑比克",
  "NA": "纳米比亚",
  "NC": "新喀里多尼亚",
  "NE": "尼日尔",
  "NF": "诺福克岛",
  "NG": "尼日利亚",
  "NI": "尼加拉瓜",
  "NL": "荷兰",
  "NO": "挪威",
  "NP": "尼泊尔",
  "NR": "瑙鲁",
  "NU": "纽埃岛",
  "NZ": "新泽西",
  "OM": "阿曼",
  "PA": "巴拿马",
  "PE": "秘鲁",
  "PF": "法属波利尼西亚",
  "PG": "巴布亚新几内亚",
  "PH": "菲律宾",
  "PK": "巴基斯坦",
  "PL": "波兰",
  "PM": "圣皮埃尔和密克隆岛",
  "PN": "皮特凯恩群岛",
  "PR": "波多黎各",
  "PS": "巴勒斯坦",
  "PT": "葡萄牙",
  "PW": "帕劳",
  "PY": "巴拉圭",
  "QA": "卡塔尔",
  "RE": "留尼旺岛",
  "RO": "罗马尼亚",
  "RS": "塞尔维亚",
  "RU": "俄罗斯",
  "RW": "卢旺达",
  "SA": "沙特阿拉伯",
  "SB": "所罗门群岛",
  "SC": "塞舌尔",
  "SD": "苏丹",
  "SE": "瑞典",
  "SG": "新加坡",
  "SH": "圣赫勒拿岛",
  "SI": "斯洛文尼亚",
  "SJ": "斯瓦尔巴和扬马延岛",
  "SK": "斯洛伐克",
  "SL": "塞拉利昂",
  "SM": "圣马力诺",
  "SN": "塞内加尔",
  "SO": "索马里",
  "SR": "苏里南",
  "SS": "南苏丹",
  "ST": "圣多美和普林西比",
  "SV": "萨尔瓦多",
  "SX": "荷属圣马丁",
  "SY": "阿拉伯叙利亚共和国",
  "SZ": "斯威士兰",
  "TC": "特克斯和凯科斯岛",
  "TD": "乍得",
  "TF": "法属南部领地",
  "TG": "多哥",
  "TH": "泰国",
  "TJ": "塔吉克斯坦",
  "TK": "托克劳群岛",
  "TL": "东帝汶",
  "TM": "土库曼斯坦",
  "TN": "突尼斯",
  "TO": "汤加",
  "TR": "土耳其",
  "TT": "特立尼达和多巴哥",
  "TV": "图瓦卢",
  "TZ": "坦桑尼亚",
  "UA": "乌克兰",
  "UG": "乌干达",
  "UM": "美国本土外小岛屿",
  "US": "美国",
  "UY": "乌拉圭",
  "UZ": "乌兹别克斯坦",
  "VA": "梵蒂冈",
  "VC": "圣文森特和格林纳丁斯",
  "VE": "委内瑞拉",
  "VG": "英属维尔京群岛",
  "VI": "美属维尔京群岛",
  "VN": "越南",
  "VU": "瓦努阿图",
  "WF": "瓦利斯群岛和富图纳群岛",
  "WS": "萨摩亚群岛",
  "YE": "也门",
  "YT": "马约特岛",
  "ZA": "南非",
  "ZM": "赞比亚",
  "ZW": "津巴布韦"
}


```

## 返回参数 {#resultMapping .section}

|名称|类型|示例值|描述|
|--|--|---|--|
|RequestId|String|66A98669-CC6E-4F3E-80A6-3014697B11AE|当前请求的ID。

 |
|TaskStatus|Integer|2|当前请求的执行状态：

 -   **0**：等待执行。
-   **1**：正在执行中。
-   **2**：已执行完成。

 |
|WafTaskId|Integer|123|WAF的请求ID。

 |

## 示例 {#demo .section}

请求示例

``` {#request_demo}

http(s)://wafopenapi.cn-hangzhou.aliyuncs.com/?Action=ModifyProtectionModuleRule
&Defense=antifraud
&Domain=www.aliyun.com
&Id=111
&InstanceId=waf_elasticity-cn-0xldbqtm005
&Rule={\"uri\":\"http://xx.aliyun.com/example/\"}
&LockVersion=1
&<公共请求参数>

```

正常返回示例

`XML` 格式

``` {#xml_return_success_demo}
<ModifyProtectionModuleRuleResponse>
  <code>200</code>
  <data>
    <TaskStatus>2</TaskStatus>
    <WafTaskId>dsfdsfds</WafTaskId>
  </data>
  <requestId>66A98669-CC6E-4F3E-80A6-3014697B11AE</requestId>
  <success>true</success>
</ModifyProtectionModuleRuleResponse>

```

`JSON` 格式

``` {#json_return_success_demo}
{
	"requestId":"66A98669-CC6E-4F3E-80A6-3014697B11AE",
	"data":{
		"TaskStatus":2,
		"WafTaskId":"dsfdsfds"
	},
	"code":200,
	"success":true
}
```

## 错误码 { .section}

[查看本产品错误码](https://error-center.aliyun.com/status/product/waf-openapi)

